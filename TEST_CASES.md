# 视频时间轴编辑器 - 测试用例

## 测试用例列表

### 1. 基础功能测试

#### 1.1 媒体选择和初始化
- [ ] 从媒体选择器选择图片/视频后，能正常进入时间轴
- [ ] 视频轨道默认居中显示
- [ ] 多个媒体项按顺序排列

#### 1.2 轨道添加
- [ ] 点击"文字"菜单，能添加文字轨道到中心位置
- [ ] 点击"音频-音乐"，能添加音乐轨道
- [ ] 点击"画面-画中画"，能添加画中画轨道（黑白格子背景）
- [ ] 添加多个同类型轨道时，智能分配行位置，不重叠

#### 1.3 字幕轨道特殊功能
- [ ] 添加"主轨字幕"时，自动分割成2-5段
- [ ] 第一段起始点在1-5秒内随机
- [ ] 每段字幕长度2-4秒随机
- [ ] 字幕段间隔1-3秒随机
- [ ] 最短字幕长度不低于2秒

### 2. 轨道操作测试

#### 2.1 轨道选择和拖动
- [ ] 单击轨道可以选中（显示黄色边框）
- [ ] 选中后可以水平拖动轨道
- [ ] 选中后可以垂直拖动轨道（换行）
- [ ] 垂直拖动到有冲突的行时，自动为其腾出空位
- [ ] 视频主轨不能拖动

#### 2.2 双击功能
- [ ] 双击轨道显示操作气泡
- [ ] 双击视频主轨显示"复制"按钮
- [ ] 双击附加轨道显示完整操作菜单（变长、变短、复制、删除）
- [ ] 双击音乐轨道显示"音乐卡点"按钮

#### 2.3 方向控制按钮
- [ ] 选中轨道后，左右两侧显示方向控制按钮
- [ ] 点击"←"按钮，轨道左移1秒（40px）
- [ ] 点击"→"按钮，轨道右移1秒（40px）
- [ ] 点击"↑"按钮，轨道上移一层
- [ ] 点击"↓"按钮，轨道下移一层
- [ ] 上下移动时检测冲突，有冲突自动腾出空位

#### 2.4 轨道操作菜单
- [ ] 点击"变长"增加3秒长度
- [ ] 点击"变短"减少3秒长度（最短3秒）
- [ ] 点击"复制"创建新的轨道副本（偏移100px）
- [ ] 点击"删除"移除轨道

### 3. 音乐卡点功能测试

#### 3.1 卡点生成
- [ ] 双击音乐轨道，显示"音乐卡点"按钮
- [ ] 点击"音乐卡点"，按规律生成卡点：1s、1s、1s、3s循环
- [ ] 卡点显示为黄色圆点
- [ ] 卡点位置准确（1秒 = 40px）

#### 3.2 卡点与轨道长度联动
- [ ] 已有卡点的音乐轨道，点击"变长"后自动在新增部分继续打卡点
- [ ] 新卡点严格遵循1s、1s、1s、3s循环规律
- [ ] 新卡点从上次循环位置无缝衔接

#### 3.3 卡点显示
- [ ] 音乐轨道展开时，卡点正常大小显示（8px）
- [ ] 音乐轨道折叠时，卡点缩小显示（6px）
- [ ] 卡点在吸底模式和展开模式都能正常显示

### 4. 吸底和展开功能测试

#### 4.1 自动吸底
- [ ] 添加轨道较少时，视频主轨居中显示
- [ ] 添加轨道过多（超过容器高度）时，视频主轨自动吸底
- [ ] 吸底时，音乐轨道自动折叠成细线（4px）

#### 4.2 向上滑动展开
- [ ] 吸底状态下，向上滑动超过50px，自动展开所有内容
- [ ] 展开后，视频主轨回到滚动容器中
- [ ] 展开后，所有轨道完全可见
- [ ] 展开后，可以自由上下滚动

#### 4.3 吸底时轨道操作
- [ ] 吸底状态下，上方轨道可以正常选中
- [ ] 吸底状态下，上方轨道可以水平拖动
- [ ] 吸底状态下，上方轨道可以垂直拖动（上下移动层级）
- [ ] 吸底状态下，滚动容器正常工作

#### 4.4 双击音乐轨道切换折叠/展开
- [ ] 吸底状态下，双击音乐轨道可以展开
- [ ] 再次双击音乐轨道可以恢复折叠
- [ ] 用户展开的音乐轨道状态被记录

### 5. 方案切换测试

#### 5.1 1.0-音+包方案
- [ ] 切换到"1.0-音+包"方案
- [ ] 音乐轨道添加到视频主轨上方
- [ ] 所有轨道使用智能行放置逻辑

#### 5.2 1.2-主轨方案
- [ ] 切换到"1.2-主轨方案"
- [ ] 音乐轨道默认添加到视频主轨下方
- [ ] 其他轨道添加到视频主轨上方
- [ ] 音乐轨道在吸底时自动折叠

#### 5.3 方案切换清理
- [ ] 切换方案时清空所有附加轨道
- [ ] 切换方案时重置手动展开状态
- [ ] 切换方案时清空卡点数据

### 6. 工程包系统测试

#### 6.1 自动保存
- [ ] 编辑时间轴时，1秒后自动保存项目
- [ ] 自动保存包含所有轨道数据
- [ ] 自动保存包含卡点数据

#### 6.2 手动导出
- [ ] 点击"导出"按钮，弹出项目名称输入框
- [ ] 输入项目名称后保存成功
- [ ] 项目保存到工程包列表（最多10个）

#### 6.3 项目恢复
- [ ] 从工程包列表选择项目，完整恢复所有状态
- [ ] 恢复后，所有轨道位置正确
- [ ] 恢复后，卡点数据正确
- [ ] 恢复后，方案设置正确

#### 6.4 新项目和恢复项目区分
- [ ] 从媒体选择器进入，创建新项目（清除旧数据）
- [ ] 从工程包列表进入，恢复已保存项目

### 7. 预览和播放测试

#### 7.1 预览显示
- [ ] 选中视频轨道时，预览区显示对应视频帧
- [ ] 选中图片轨道时，预览区显示对应图片
- [ ] 播放时，预览区实时更新

#### 7.2 播放控制
- [ ] 点击"播放"按钮，开始播放
- [ ] 点击"暂停"按钮，暂停播放
- [ ] 点击"停止"按钮，停止播放并回到起点
- [ ] 时间码正确显示（00:00.0 / 总时长）

### 8. 边界情况测试

#### 8.1 空状态
- [ ] 没有媒体时，提示添加媒体
- [ ] 没有轨道时，界面正常显示

#### 8.2 极限情况
- [ ] 添加10+个轨道，界面正常显示
- [ ] 轨道长度超长（100秒+），滚动正常
- [ ] 快速连续操作不出错

#### 8.3 异常处理
- [ ] 视频加载失败时，显示默认时长
- [ ] 本地存储失败时，不影响编辑功能

## 测试执行记录

### 测试日期：____年__月__日
### 测试人员：_________
### 版本号：v_____

| 测试用例编号 | 通过/失败 | 备注 |
|------------|----------|------|
| 1.1 | ⬜ | |
| 1.2 | ⬜ | |
| 1.3 | ⬜ | |
| 2.1 | ⬜ | |
| 2.2 | ⬜ | |
| 2.3 | ⬜ | |
| 2.4 | ⬜ | |
| 3.1 | ⬜ | |
| 3.2 | ⬜ | |
| 3.3 | ⬜ | |
| 4.1 | ⬜ | |
| 4.2 | ⬜ | |
| 4.3 | ⬜ | |
| 4.4 | ⬜ | |
| 5.1 | ⬜ | |
| 5.2 | ⬜ | |
| 5.3 | ⬜ | |
| 6.1 | ⬜ | |
| 6.2 | ⬜ | |
| 6.3 | ⬜ | |
| 6.4 | ⬜ | |
| 7.1 | ⬜ | |
| 7.2 | ⬜ | |
| 8.1 | ⬜ | |
| 8.2 | ⬜ | |
| 8.3 | ⬜ | |

## 问题汇总

| 问题编号 | 严重程度 | 问题描述 | 复现步骤 | 解决状态 |
|---------|---------|---------|---------|---------|
| | | | | |
